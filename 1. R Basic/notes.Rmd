Introduction to R
========================================================

Objective of this lab
------------
1. Install R and RStudio
2. Learn basic commands in R
3. Get started with Rattle


Before You Start: Install R, RStudio
-------------
**R**

Windows:
http://cran.case.edu/bin/windows/base/R-3.0.1-win.exe

Mac OS X:
http://cran.case.edu/bin/macosx/R-latest.pkg

**RStudio**

http://www.rstudio.com/ide/download/desktop


The download and installation should be straightforward, in case you encounter problems you can check the following video tutorials. 

Install R:
http://www.youtube.com/watch?v=SJ9sVyqWJn8&hd=1

Install R Studio:
http://www.youtube.com/watch?v=6aTRbo7kdGk&hd=1


Install Rattle
-------------
### Rattle: "A Graphical User Interface for Data Mining using R". 
With Rattle you can presents statistical and visual summaries of data, transforms data into forms that can be readily modelled, builds both unsupervised and supervised models from the data, presents the performance of models graphically, and scores new datasets.[1]

Basically, *R* is a command line language, *RStudio* offers a pleasant development enviroment for you to write code and manage projects, and *Rattle* is a package in R that allows you to do Data Mining tasks in a graphical interface. 

To install Rattle, startup R and then run the following command:

```{r, eval=FALSE}
install.packages("rattle")
```

Alternatively, you can use the *Install Packages* in RStudio.

R Basics
--------------
### Assignment
You can assign numbers and lists of numbers (vector) to a variable.
Assignment is specified with the "<-" or "=" symbol. There are some subtle differences between them but most of the time they are equivalent. 

Here we define two variables $x = 10$ and $y = 5$, then we calculate the result of $x+y$.

```{r assign}
x <- 10
y = 5
x+y
```

To assign a list of numbers (vector) to a variable, the numbers within the c command are separated by commas. As an example, we can create a new variable, called "z" which will contain the numbers 3, 5, 7, and 9:
```{r}
z = c(3,5,7,9)
```

In RStudio, you can view every variable you defined, along with other objects such as imported datasets in the *Workspace* panel.

### Basic Calculation
You can use R as an over-qualified calculator. Try the following commands. You need to have $x, y, z$ defined first.

```{r basic_calc}
x+y
log(x)
exp(y)
cos(x)
```

Logical operations:
```{r}
x == y
x > y
```

Calculations on list of numbers, recall $z = [3,5,7,9]$. 
Note that you can put a # in front of a line to write comment in code.
```{r}
#Average
mean(z)
#Standard devidation
sd(z)
#Median
median(z)
#Max
max(z)
#Min
min(z)
#Summary Stats
summary(z)
```


### Data Types in R: Vectors, matrices and data frames

* Vector is a list of numbers (or strings), $z$ is a vector with $[3,5,7,9]$

* Matrix is a table of numbers (or strings). $A$ is a matrix with 2 rows and 3 columns. 
* Data frames in R are the "datasets"", that is tables of data with each row as an observation, and each column representing a variable. Data frames have column names (variable names) and row names. In the example, the function _data.frame(A)_ transforms the matrix $A$ into a data frame. Most of the time you will import a text file as a data frame or use one of the example datasets that come with R.


```{r data_str}

z = c(3,5,7,9)

A = matrix(c(1,2,3,4,5,6), nrow = 2)

df = data.frame(A) 
```

Elementwise operations
```{r ele_op}
z
z/10
A
A+2
df
df+100
```
Subsetting, indexing
```{r}
length(z)
z[1:3]
z[-1]
A[2,2]
A[1, ]
A[, 2:3]
```
Matrix Calculation
```{r}
# Dimensions of A
dim(A)
# Transpose
t(A)
```
Data Frame

df$var will select var from df

In RStudio, hitting tab after `df$` allows you to select/autocomplete variable names in df  

```{r}
#Load cars dataset that comes with R (50 obs, 2 variables)
data(cars)
dim(cars)
#First 2 obs of the variable dist in cars data frame
cars$dist[1:2]
```

You can use the _read.table_ function to import comma delimited text files (csv files). An easier way is to use the Import Dataset Wizard in RStudio.
```{r, eval=FALSE}
mydata = read.table("c:/mydata.csv", header=TRUE, sep=",")
```

### Probability Distributions
Types of distributions: norm, binom, beta, cauchy, chisq, exp, f, gamma, geom, hyper, lnorm, logis, nbinom, t, unif, weibull, wilcox

Four prefixes:

1. 'd' for density (PDF)

2. 'p' for distribution (CDF)

3. 'q' for quantile (percentiles)

4. 'r' for random generation (simulation)

```{r}
dbinom(x=4,size=10,prob=0.5)
pnorm(1.86)
qnorm(0.975)
rnorm(10)
rnorm(n=10,mean=100,sd=20)
```

### Regression Models
```{r}
# Load car dataset that comes with R
data(cars)
#fit a simple linear regression between braking distance and speed
lm(dist~speed, data=cars)
```

### Basic Plotting
```{r}
plot(cars)
```

### Functions
* Most of R consists of functions
* The arguments can either be input in the right order, or using argument names
* In RStudio, pressing tab after function name gives help about arguments
* You can define your own functions, in the following example the function *abs_val* returns the absolute value of a number.

```{r}
abs_val = function(x){
  if(x >= 0){
    return(x)
  }
  else{
    return(-x)
  }
}
```
```{r}
abs_val(-5)
```

### Organizing your computations
1. R has a "current directory" (Working Directory). To set Working Directory in RStudio: Session -> Set Working Directory.
2. Your objects (loaded datasets, variables, functions, etc.) are contained in your "current workspace", which can be saved any time. In Rstudio: Session -> Load Workspace/Save Workspace As.
3. Keep it tidy! Keep separate projects (code, data files) in separate workspaces/directories.


### Help
1. Use _help(mean)_ or _?mean_  to find help documents for the function _mean_.
2. In Rstudio, pressing tab after a function name gives help about the arguments
3. A google search will probably answer most of your questions.
4. Where to ask questions?
  * Stackoverflow: http://stackoverflow.com/questions/tagged/r
  * R Help Mailing List: http://r.789695.n4.nabble.com/R-help-f789696.html

### Starting Rattle
To start Rattle, first load the Rattle package (after you install it), and use _rattle()_ command to launch it.
```{r, eval=FALSE}
library(rattle)
rattle()
```
When using Rattle, it will ask you to install many packages along the way, you will have to keep hitting the Yes button.



Note:
Part of this handout is built upon Clarkson University's R Tutorial [2] and Dr.Yan Yu's slides.

[1]: http://rattle.togaware.com/ "Rattle Official Website"
[2]: http://www.cyclismo.org/tutorial/R/